# ShiftMaster プロンプト自動生成器

## 概要
`Get_ChildItem.py` は、GitHub Copilot Agentに指示を出す際に、勤怠システム開発に必要な条件を自動で付加するPythonプログラムです。

## 主な機能

### 🚀 自動プロンプト生成
- ユーザーの質問・指示に16項目の必須条件を自動付加
- 技術スタック情報の自動挿入
- タイムスタンプ付きの整理されたプロンプト生成

### 💾 ファイル保存機能
- 生成されたプロンプトを自動的にテキストファイルに保存
- タイムスタンプ付きファイル名で履歴管理
- UTF-8エンコーディングで日本語完全対応

### 🔄 2つの実行モード
1. **対話モード**: 質問を入力しながら対話的にプロンプト生成
2. **自動モード**: コマンドライン引数で一括プロンプト生成

## 使用方法

### 基本実行

#### 対話モード
```powershell
python Get_ChildItem.py
```

#### 自動モード（コマンドライン引数）
```powershell
python Get_ChildItem.py "Djangoアプリケーションに新しい機能を追加したい"
```

### バッチファイル実行
```cmd
run_prompt_generator.bat
```

### PowerShellスクリプト実行
```powershell
.\run_prompt_generator.ps1 "質問内容"
```

## 生成されるプロンプトの構成

### ヘッダー部分
- 生成日時
- プロジェクト名とバージョン
- ユーザーからの指示・質問

### 必須条件（16項目）
1. ✅ **MTRXシステム統合**: https://www.mtrx.co.jp/ の全機能統合
2. 🤖 **AI自動化**: 無料AI組み込みによる自動勤務表管理
3. 🎨 **レイアウト保持**: 指示があるまで現在のレイアウト維持
4. 🏗️ **安定性重視**: 重複のない拡張性の高い設計
5. 🚨 **エラー表示**: 毎回タスク画面にエラー表示
6. 🔧 **自動デバッグ**: エラーの自動検出・修正
7. 🌐 **URL確認**: 修正後のサイトURL表示
8. ⚡ **自動実行**: 各種ボタンの自動実行対応
9. 🔗 **連携確認**: Django コンポーネント間の連携確認
10. 💻 **技術スタック**: Django + PostgreSQL17 + Bootstrap 5
11. 💡 **提案制御**: 修正提案時の実行待機
12. 🗄️ **データベース設定**: PostgreSQL設定とポート5333
13. 🔄 **システム再利用**: 既存システムの効率的活用
14. 🖼️ **画像管理**: 指定ディレクトリからの画像自動選択
15. 🖱️ **フロントエンド**: 全クリックイベントのエラー対策
16. 🤖 **完全自動化**: 全プロセスの自動化システム

### フッター部分
- 技術スタック詳細
- 自動化要件
- 生成プログラム情報

## ファイル構成

```
h:\Projects\ShiftMaster\
├── Get_ChildItem.py              # メインプログラム
├── run_prompt_generator.bat      # Windowsバッチファイル
├── run_prompt_generator.ps1      # PowerShellスクリプト
├── README_PromptGenerator.md     # このファイル
└── generated_prompt_*.txt        # 生成されたプロンプトファイル
```

## 技術仕様

### 必要な環境
- Python 3.x
- Windows 10/11
- UTF-8対応テキストエディタ

### 依存ライブラリ
- 標準ライブラリのみ（外部ライブラリ不要）
  - `sys`
  - `json`
  - `datetime`
  - `pathlib`
  - `typing`

### 出力ファイル形式
- **テキストファイル**: `generated_prompt_YYYYMMDD_HHMMSS.txt`
- **エンコーディング**: UTF-8
- **改行コード**: CRLF（Windows標準）

## 使用例

### 例1: 基本的な質問
```
入力: "ユーザー認証機能を追加したい"
出力: 16項目の条件付きプロンプト + 技術スタック情報
```

### 例2: 具体的な実装要求
```
入力: "勤怠データのCSVエクスポート機能を実装してください"
出力: 詳細な条件付きプロンプト + データベース設定情報
```

### 例3: エラー対応
```
入力: "ログイン機能でエラーが発生しています"
出力: 自動デバッグ・修正条件付きプロンプト
```

## 設定のカスタマイズ

### システム条件の変更
`Get_ChildItem.py` の `_load_system_conditions()` メソッド内で条件を編集できます。

### 技術スタックの更新
`generate_system_prompt()` メソッド内の技術スタック情報を更新できます。

### 出力形式の変更
プロンプトのフォーマットは `generate_system_prompt()` メソッドで調整できます。

## トラブルシューティング

### よくある問題

#### 文字化け
```powershell
# PowerShellの場合
[Console]::OutputEncoding = [System.Text.Encoding]::UTF8
python Get_ChildItem.py
```

#### ファイル保存エラー
- ディスク容量の確認
- ファイル書き込み権限の確認
- ファイルパスの有効性確認

#### Python実行エラー
```cmd
# Pythonの確認
python --version

# パスの確認
where python
```

## 更新履歴

### v1.0.0 (2025年6月23日)
- 初回リリース
- 基本的なプロンプト生成機能
- 対話モードと自動モードの実装
- ファイル保存機能
- バッチファイルとPowerShellスクリプトの提供

## ライセンス
ShiftMaster Project 専用

## サポート
技術的な問題や改善提案は開発チームまでお問い合わせください。
