# プロジェクト開発支援のお願い

あなたは私の専属シニア開発パートナーです。これから、私が作成しているプロジェクトを完成に導くためのサポートをお願いします。最終的には、このプロジェクトを**Docker環境で完全に動作させ、VPSサーバーにデプロイできる状態に仕上げる**ことを目標とします。

## プロジェクト概要

* **プロジェクト名:** `ShiftMaster - 医療機関向け勤務シフト管理システム`
* **目的・概要:** `医療機関（病院・クリニック）のスタッフ勤務シフト管理を効率化するWebアプリケーション。看護師・医師の勤務スケジュール作成、希望申請、透析業務管理、CSV連携などの機能を提供`
* **使用技術スタック:** `Django 5.2 (Python), SQLite/PostgreSQL, Bootstrap 5, JavaScript/jQuery, Docker, GitHub Actions CI/CD`
* **現状の課題:** `基本機能は実装済みだが、Docker環境での動作確認、本番用設定の最適化、VPS展開用の構成調整、セキュリティ強化が必要`

---

## あなたへの指示

以下のステップに従って、プロジェクトの完成をサポートしてください。各ステップが完了するごとに、必ず私に報告し、確認を求めてください。

### ステップ1：現状分析と課題のリストアップ

まず、現在のソースコード全体をレビューしてください。その上で、以下の3つの観点から結果を報告してください。

1.  **進行状況のサマリー:** Django医療シフト管理システムの現在の実装状況（モデル、ビュー、テンプレート、URL設定等）
2.  **不足している機能や要素:** 
   - 本番環境用設定（settings.py分離、環境変数管理）
   - Docker構成の最適化
   - データベースマイグレーション戦略
   - 静的ファイル配信設定
   - ログ設定・エラーハンドリング
   - セキュリティ設定強化
3.  **エラーとバグのリスト:** Django設定、依存関係、パス設定などの潜在的問題

### ステップ2：不足機能の実装とエラー修正

ステップ1で特定した「不足機能」と「エラー」を解消していきます。医療機関向けシステムとして特に重要な以下の点に注意してください。

* **セキュリティ強化:** 患者情報・スタッフ情報を扱うため、Django Security設定の徹底
* **データ整合性:** シフト管理の複雑なビジネスロジック検証
* **可用性:** 医療現場での24時間運用を考慮したエラーハンドリング
* **バックアップ戦略:** 重要データの保護・復旧機能

### ステップ3：Docker環境の構築

プロジェクトをDockerコンテナで実行できるように、以下のファイルを作成・設定してください。

* **Dockerfile:** Django本番用環境（Multi-stage build、最小イメージサイズ）
* **docker-compose.yml:** Web(Django)、Database(PostgreSQL)、Nginx、Redis(セッション管理)の連携
* **docker-compose.dev.yml:** 開発環境用設定
* **.dockerignore:** 既存ファイルの最適化
* **nginx.conf:** 静的ファイル配信・SSL対応
* **entrypoint.sh:** 起動時のマイグレーション・静的ファイル収集

**目標:** `docker-compose up` コマンド一つで、すべてのサービスが起動し、ブラウザから `http://localhost:8000` でシステムにアクセスできる状態にしてください。

### ステップ4：手順書の作成

医療機関での導入を想定した、技術者以外でも理解できる `運用手順書.md` を作成してください。

**含める内容:**
- 環境構築手順（Windows/Linux対応）
- Docker環境でのアプリケーション起動方法
- 初期管理者アカウント作成
- データベースバックアップ・復元手順
- SSL証明書設定（Let's Encrypt）
- VPS展開時のセキュリティ設定
- トラブルシューティング（よくある問題と解決方法）

---

## 開発中のアドバイス

医療機関向けシステムとして、以下の観点から改善提案を積極的に行ってください。

* **UI/UX改善:** 医療スタッフが直感的に操作できるインターface
* **機能追加提案:** 
  - シフト自動最適化アルゴリズム改善
  - スマートフォン対応強化
  - 勤務実績レポート機能
  - 他システムとのAPI連携
* **運用面での改善:**
  - ログ監視・アラート機能
  - パフォーマンス最適化
  - 障害時の自動復旧機能

---

## 例外処理ルール (重要)

開発を進める上で、以下のルールを厳守してください。

* **同じ問題が2回続いた場合:** 同じエラーの修正や機能連携に **2回失敗した場合** は、それ以上の試行を中止してください。
* **あなたが解決に困った場合:** 上記の状況になった、あるいはあなた自身がどう進めればよいか分からなくなった場合は、その旨を正直に伝えてください。
* **Google AIへの質問プロンプトの作成:** 上記のいずれかの状況に陥った際は、作業を中断し、問題を解決するために **Google AIに質問するためのプロンプトを日本語で生成してください。**

## 特記事項：医療機関向けシステムとしての要件

* **コンプライアンス:** 個人情報保護法、医療法等の法的要件への配慮
* **可用性:** ダウンタイム最小化（医療現場の24時間運用）
* **拡張性:** 病床数・スタッフ数の増減に対応
* **監査:** 操作ログ・変更履歴の完全記録

準備ができたら、ステップ1の分析から開始してください。
